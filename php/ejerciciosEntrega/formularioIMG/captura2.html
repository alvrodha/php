<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Captura de Jugador</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    form { max-width: 400px; margin: auto; }
    input, select, textarea { width: 100%; margin: 8px 0; padding: 6px; }
    .error { color: red; }
  </style>
  <script>
    function validarFormulario() {
      const nombre = document.getElementById("nombre").value.trim();
      const alias = document.getElementById("alias").value.trim();
      const imagen = document.getElementById("imagen").files[0];

      // Validar campos contra inyección básica
      const patron = /^[a-zA-Z0-9 áéíóúÁÉÍÓÚñÑ]+$/;
      if (!patron.test(nombre) || !patron.test(alias)) {
        alert("⚠️ El nombre y alias no deben contener caracteres sospechosos.");
        return false;
      }

      // Validar imagen (si existe)
      if (imagen) {
        const tipoValido = imagen.type === "image/png";
        const tamanoValido = imagen.size <= 10 * 1024; // 10 KB
        if (!tipoValido) {
          alert("⚠️ Solo se permiten imágenes PNG.");
          return false;
        }
        if (!tamanoValido) {
          alert("⚠️ La imagen no debe superar los 10 KB.");
          return false;
        }
      }

      return true;
    }
  </script>
</head>
<body>
  <h2>Formulario de Captura de Jugador</h2>
  <form action="index.php" method="POST" enctype="multipart/form-data" onsubmit="return validarFormulario();">
    <label for="nombre">Nombre:</label>
    <input type="text" name="nombre" id="nombre" required>

    <label for="alias">Alias:</label>
    <input type="text" name="alias" id="alias" required>

    <label for="edad">Edad:</label>
    <input type="number" name="edad" id="edad" min="5" max="100" required>

    <label for="imagen">Imagen (opcional, PNG máx 10KB):</label>
    <input type="file" name="imagen" id="imagen" accept="image/png">

    <input type="submit" value="Enviar">
  </form>
</body>
</html>
